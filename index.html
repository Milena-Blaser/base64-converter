<input type="file" id="imageInput" />
<button onclick="uploadImage()">Upload</button>

<script>
  async function uploadImage() {
    const input = document.getElementById('imageInput');
    if (!input.files.length) {
      alert("Please choose a file");
      return;
    }

    const file = input.files[0];
    const formData = new FormData();
    formData.append("image", file);

    try {
      const response = await fetch("https://ocr-extract-text.p.rapidapi.com/ocr", {
        method: "POST",
        headers: {
          "X-RapidAPI-Key": "11083d3e5emsh163c76e8056d4a5p1d3e0cjsnba8f2be5464a",
          "X-RapidAPI-Host": "ocr-extract-text.p.rapidapi.com"
        },
        body: formData
      });

      const result = await response.json();
      console.log("OCR result:", result);

      // Send result to Thunkable app if embedded
      if (window.ReactNativeWebView) {
        window.ReactNativeWebView.postMessage(result.text || "No text found");
      } else {
        alert(result.text || "No text found");
      }

    } catch (err) {
      console.error("Upload failed", err);
      alert("OCR failed");
    }
  }
</script>
